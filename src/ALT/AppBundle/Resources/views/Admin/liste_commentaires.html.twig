{% extends '::layout-admin.html.twig' %}

{% block body %}

    {% set title = "Liste des commentaires" %}
    {% if app.request.query.get('filtre') %} {# vérifie si dans l'URL, on trouve "?filtre=xxx" #}
        {% set title = "Liste des commentaires signalés" %}
    {% endif %}

    <div class="liste"><h2 >{{ title }}</h2>

    {% if app.request.query.get('filtre') %}
        <a href="{{ path('alt_app_admin_liste_commentaires') }}">Afficher tous les commentaires</a>
    {% else %}
        <a href="{{ path('alt_app_admin_liste_commentaires', {'filtre': 'signaler'}) }}">Afficher seulement les commentaires signalés</a>
    {% endif %}

    <table class="table table-striped">
        <thead>
            <tr>
                <th>Signalement</th>
                <th style="width: 120px">Titre du Billet</th>
                <th>Auteur</th>
                <th style="width: 120px">Date</th>
                <th>Contenu</th>
                <th style="width: 280px;">&nbsp;</th>
            </tr>
        </thead>

        <tbody>
            {% for commentaire in commentaires %}
            <tr>
                <td style="text-align: center">
                    {% if commentaire.signale == 0 %}
                        <span class="glyphicon glyphicon-ok"></span>
                    {% else %}
                        <span class="glyphicon glyphicon-remove"></span>
                    {% endif %}
                </td>
                <td>{{ commentaire.billet.titre }}</td>
                <td>{{ commentaire.auteur }}</td>
                <td>{{ commentaire.date | date('d-m-Y H:i:s') }}</td>
                <td>{{ commentaire.contenu|raw }}</td>
                <td>
                    <a href="{{ path('alt_app_admin_modifier_commentaire', {'id': commentaire.id}) }}" class="btn btn-default">
                        <i class="glyphicon glyphicon-edit"></i>
                        Modifier
                    </a>

                    <a href="{{ path('alt_app_admin_supprimer_commentaire', {'id': commentaire.id}) }}" class="btn btn-danger">
                        <i class="glyphicon glyphicon-trash"></i>
                        Supprimer
                    </a>
                </td>

            </tr>
            {% endfor %}
        </tbody>
    </table>

    <hr>
        <p>
            <a href="{{ path('alt_app_admin_accueil') }}" class="btn btn-default">
                <i class="glyphicon glyphicon-chevron-left"></i>
                Retour à la page d'accueil
            </a>
        </p>
    </div>
{% endblock %}